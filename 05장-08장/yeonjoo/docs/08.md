# 8. 경계

## 외부 코드 사용하기

- 인터페이스, 패키지, 프레임워크 제공자는 적용성을 최대한 넓히려 애쓰고 (더 많은 환경에서 돌아가야 더 많은 고객이 생김), 사용자는 자신의 요구에 집중하는 인터페이스를 바람
- Generics를 사용하여 코드 가독성을 높일 수 있음
- Map 예시 → 새로운 클래스로 경계를 감싸기

## 경계 살피고 익히기

- 학습 테스트 : 간단한 테스트 케이스를 작성해 외부 코드를 익히는 것
    - 프로그램에서 사용하려는 방식대로 외부 API를 호출
    - 학습 테스트는 API를 사용하려는 목적에 초점을 맞춤

## log4j 익히기

- 아파치의 log4j : 로깅 기능
- 저자는 구글링과 테스트 코드를 통해 log4j를 익히고, 얻은 지식을 간단한 단위 테스트 케이스 몇 개로 표현하여 책에 실었음 (목록 8-1 참고). 그리고 이 내용을 로거 클래스로 캡슐화하여, 나머지 프로그램에서 log4j 경계 인터페이스를 몰라도 되도록 함

## 학습 테스트는 공짜 이상이다

- 학습 테스트에 드는 비용은 없음 (왜냐면, 어쨌든 API는 배워야 하므로…)
- 필요한 지식을 얻는 손쉬운 방법이고, 이해도를 높혀주는 정확한 실험
- 패키지 새 버전이 나오면 학습 테스트를 돌려 차이를 확인하기
    - 새 버전이 우리 코드와 호환되지 않으면 학습 테스트에서 발견될 수 있음
- 실제 코드와 동일한 방식으로 인터페이스를 사용하는 테스트 케이스를 작성하는 것은 필요함

## 아직 존재하지 않은 코드를 사용하기

- 아는 코드와 모르는 코드를 분리하는 경계!
- Adapter Pattern으로 API 사용을 캡슐화 하여 API가 바뀔 때 수정할 코드를 한 곳으로 모음
    - 우리가 원하는 인터페이스를 패키지가 제공하는 인터페이스로 변환
    - 다른 팀과 일할 때 저쪽 상황을 전혀 모르는 상황에서, 우린 우리가 바라는 인터페이스를 구현. 저쪽 팀은 Adapter를 구현하여 개발 가능.
- 테스트도 아주 편함

## 깨끗한 경계

- 경계에 위치하는 코드는 깔끔히 분리하기
    - 기대치를 정의하는 테스트 케이스도 작성하기
- 통제가 불가능한 외부 패키지에 의존하는 대신 통제가 가능한 우리 코드에 의존하는 편이 좋음
- 외부 패키지를 호출하는 코드를 가능한 줄여 경계를 관리하자
    - 코드 가독성을 높히고, 경계 인터페이스를 사용하는 일관성도 높아지며, 외부 패키지가 변했을 때 변경할 코드도 줄어듦